$.fn.cutter=function(a){function i(a){$(p).html("").append(d),$("#"+l).prop("src",a.target.result.toString()).hide(),$(n).prop("disabled",!1),$(c).prop("disabled",!1),$(s).prop("disabled",!1),$(h).prop("disabled",!1),$("#"+l+"_button_accept").off("click"),$("#"+l+"_button_cancel").off("click"),$(v).off("shown.bs.modal"),$("#"+l+"_button_accept").on("click",function(){var a=$("#"+l).cropper("getDataURL");if(""==a){var i=$("#"+l).cropper("getImageData");$(n).val("0"),$(c).val(i.naturalWidth),$(s).val("0"),$(h).val(i.naturalHeight),f.prop("src",$("#"+l).prop("src"))}else f.prop("src",a);$("#preview-pane").show(),$(p).html(""),$(v).modal("hide")}),$("#"+l+"_button_cancel").on("click",function(){$(o).val(""),f.hide(),$(p).html(""),$(n).val(""),$(c).val(""),$(s).val(""),$(h).val(""),$(n).prop("disabled",!0),$(c).prop("disabled",!0),$(s).prop("disabled",!0),$(h).prop("disabled",!0),$(v).modal("hide")}),$(v).on("shown.bs.modal",function(){$(p).width()>$("#"+l).width()&&$(p).css({width:$("#"+l).width()+"px"}),t.dragend=function(){var a=$(this).cropper("getData");$(n).val(a.x),$(c).val(a.width),$(s).val(a.y),$(h).val(a.height)},t.built=function(){$("#"+l).cropper("clear"),$(v).modal("adjustBackdrop")},$("#"+l).cropper(t)}),$(v).modal("show")}var e=a.inputField,t=a.jcropOptions,o=$(this),r=$(this).parents(".uploadcrop"),p=$(r).find("div#image-source"),d=$(p).find("img").prop("outerHTML"),l=$(p).find("img").attr("id"),n=$("#"+e+"-x"),c=$("#"+e+"-width"),s=$("#"+e+"-y"),h=$("#"+e+"-height"),v=$(r).find("div.modal"),f=$(r).find("#preview-pane div.preview-container img.preview_image");o.change(function(a){var e=a.target.files[0],t=/image.*/;if(e.type.match(t)){var o=new FileReader;o.onload=i,o.readAsDataURL(e)}})};